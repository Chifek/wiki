
<p>
Сколько осталось свободного места? Кто его занял? С этими двумя вопросами сталкиваться приходится постоянно, особенно администраторам файловых серверов. Если на платформе Windows, в графическом окружении выяснить это не составляет особого труда, то консоль серверных версий Linux способна многих привести в замешательство. Однако не стоит пугаться, получить интересующую информацию в среде Linux тоже довольно просто.
</p>

<p>
Как показала практика, данный вопрос актуален не только для начинающих администраторов. Действительно, недостаточно просто узнать размер файла или папки, а нужно быстро и эффективно выяснить кто именно занял место на диске и чем. Но обо всем по порядку.
</p>

<p>
Начнем с простого вопроса, как посмотреть сколько свободного места осталось. Для этой цели есть команда
</p>
<pre class="code">df -h</pre>

<p>
которая выводит список всех файловых систем, их размер и точки монтирования. Ключ -h позволяет вывести информацию в удобном для восприятия виде - в мегабайтах и гигабайтах, без ключа информация о размере выводится в блоках.
</p>

<p>
На первый вопрос мы ответили, но, как правило, этот ответ порождает еще больше вопросов. Из полученной информации абсолютно не ясно чем именно заполнен диск. Это могут быть как важные данные, так и фотографии с последнего корпоратива, «заботливо» продублированные пользователями по своим сетевым папкам. В первом случае надо думать об увеличении объема дисковой подсистемы, а во втором можно смело чистить диск и проводить разъяснительные беседы.
</p>

<p>
Чтобы ответить на второй вопрос нам нужно знать размеры отдельных папок и файлов. В Linux системах это можно сделать командой du с указанием интересующей папки, также можно указать ключ -h для получения удобных для восприятия результатов.
</p>

<p>
Несмотря на то, что эта команда работает, практической пользы от нее нет. Почему? Сейчас поясним, ниже приведена часть вывода команды:
</p>
<pre class="code">du -h /usr</pre>

<p>
Да, мы узнали что папка /usr имеет размер 498 Мб, но представления о том, что именно занимает основное место в этой папке мы не получили. Цельной картины о заполнении дискового пространства как не было, так и нет.
</p>

<p>
Но не стоит отчаиваться, на помощь нам придет небольшая утилита ncdu, в стандартной установке ее нет, но она без проблем устанавливается из репозитория:
</p>
<pre class="code">sudo apt-get install ncdu</pre>

<p>
Запущенная без параметров утилита выводит информацию о текущей папке, но так как нас интересует вся файловая система, то в качестве параметра укажем корневую директорию:
</p>
<pre class="code">ncdu /</pre>

<p>
<a href="https://youtu.be/nKJ_emIG7fA" class="urlextern" target="_blank" title="https://youtu.be/nKJ_emIG7fA" rel="ugc nofollow noopener">https://youtu.be/nKJ_emIG7fA</a>
</p>
