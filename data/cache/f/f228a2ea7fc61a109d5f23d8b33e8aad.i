a:171:{i:0;a:3:{i:0;s:14:"document_start";i:1;a:0:{}i:2;i:0;}i:1;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:68:"Пишем простого чат-бота для Telegram на PHP";i:1;i:1;i:2;i:1;}i:2;i:1;}i:2;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1;}i:3;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1;}i:4;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:269:"24 июня 2015 года разработчики Telegram открыли платформу для создания ботов (программ, которые выполняют определенные действия по заданному алгоритму). ";}i:2;i:86;}i:5;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:355;}i:6;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:355;}i:7;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:280:"За полтора года работы платформы набралось много интересных чат-ботов, решающих множество проблем и позволяющих с пользой провести время в мессенджере.";}i:2;i:357;}i:8;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:637;}i:9;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:641;}i:10;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:55:"Шаг 1: регистрация бота у @BotFather";i:1;i:2;i:2;i:641;}i:2;i:641;}i:11;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:641;}i:12;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:641;}i:13;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:254:"Прежде чем начать писать код, нового бота нужно зарегистрировать у «папы всех ботов» — @BotFather, чтобы получить токен (ключ) для работы с Telegram ";}i:2;i:711;}i:14;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"API";}i:2;i:965;}i:15;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:1:".";}i:2;i:968;}i:16;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:969;}i:17;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:969;}i:18;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:73:"Регистрация проходит в 5 простых этапов:";}i:2;i:971;}i:19;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1044;}i:20;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1044;}i:21;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:45:"1) Открываете чат с @BotFather;";}i:2;i:1046;}i:22;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1091;}i:23;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1091;}i:24;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:85:"2) Вводите или выбираете из списка команду /newbot;";}i:2;i:1093;}i:25;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1178;}i:26;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1178;}i:27;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:76:"3) Отправляете желаемое название для бота;";}i:2;i:1180;}i:28;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1256;}i:29;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1256;}i:30;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:285:"4) Пишете юзернейм бота, по которому его будут находить через поиск. Обязательно на конце вашего юзернейма должно быть слово «bot» или «_bot». Например, NetologyRSSbot;";}i:2;i:1258;}i:31;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1543;}i:32;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1543;}i:33;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:163:"5) По желанию можно сразу настроить полное или краткое описание, список команд и аватарку.";}i:2;i:1545;}i:34;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1708;}i:35;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1708;}i:36;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:608:"По итогу регистрации получаем наш токен — 375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s. 
Будьте осторожны: никогда и никому не показывайте токен, иначе ваш бот может быть скомпрометирован. Если по несчастливой случайности кто-то нехороший все-таки узнал ваш токен, то заменить его можно всё в том же @BotFather, нажав на кнопку «Revoke current token» в разделе «API Token».";}i:2;i:1712;}i:37;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2320;}i:38;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:2323;}i:39;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:75:"Шаг 2: выбираем способ обработки запросов";i:1;i:2;i:2;i:2323;}i:2;i:2323;}i:40;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:2323;}i:41;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2323;}i:42;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:76:"Исходя из официальной документации, Telegram ";}i:2;i:2413;}i:43;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"API";}i:2;i:2489;}i:44;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:250:" основан на простых HTTP-запросах. Существует всего два различных способа обрабатывать запросы, которые пользователи будут посылать боту:";}i:2;i:2492;}i:45;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2742;}i:46;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2742;}i:47;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:294:"1) проверять «вручную», используя «Long Polling»;
2) доверить всё Telegram, поставив «Webhook». В этом случае любой запрос от пользователя Telegram сам будет посылать нам на сервер.";}i:2;i:2744;}i:48;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:3038;}i:49;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:3038;}i:50;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:551:"Мы остановимся на втором варианте, но у него есть ограничение: у вас на сайте обязательно должен быть установлен SSL-сертификат, чтобы все запросы проходили через безопасный протокол HTTPS. Самоподписанные и бесплатные сертификаты «Let’s Encrypt», которые поддерживает большинство хостингов, также подходят. ";}i:2;i:3040;}i:51;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:3591;}i:52;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:3591;}i:53;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:150:"Пример настройки самоподписанного сертификата из официальной документации Telegram.";}i:2;i:3593;}i:54;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:3743;}i:55;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:3746;}i:56;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:27:"Шаг 3: пишем код";i:1;i:2;i:2;i:3746;}i:2;i:3746;}i:57;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:3746;}i:58;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:3746;}i:59;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:220:"Писать код бота будем на PHP, но чтобы не изобретать заново колесо, воспользуемся уже готовой и очень удобной библиотекой.";}i:2;i:3788;}i:60;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:4008;}i:61;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:4008;}i:62;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:336:"Перво-наперво привязываем через метод SetWebhook бота к нашему файлу-обработчику. Сделать это можно при помощи библиотеки, но есть вариант быстрее и проще – это построить вот такую ссылку:";}i:2;i:4010;}i:63;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:4352;}i:64;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:138:"
https:// api. telegram. org/bot375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s/setWebhook?url=https:// yoursitehere .ru/directory/bot.php,
";i:1;N;i:2;N;}i:2;i:4352;}i:65;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:4352;}i:66;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:6:"где";}i:2;i:4499;}i:67;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:4511;}i:68;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:200:"
375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s — это наш токен,
https:// yousitehere. ru/directory/bot.php — ссылка на файл-обработчик на нашем сайте.
";i:1;N;i:2;N;}i:2;i:4511;}i:69;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:4511;}i:70;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:376:"Открыв в браузере эту ссылку, должен прийти JSON-ответ со значением «Webhook was set», что будет означать, что вебхук установлен, и теперь все запросы от пользователей будут присылаться по адресу файла-обработчика. ";}i:2;i:4721;}i:71;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:5097;}i:72;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:5097;}i:73;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:166:"Переходим к самому главному — обработке этих самых запросов и написанию функционала бота.";}i:2;i:5101;}i:74;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:5267;}i:75;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:5267;}i:76;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:94:"Ниже представлен полный листинг файла-обработчика:";}i:2;i:5271;}i:77;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:5365;}i:78;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:2762:"
    include('vendor/autoload.php');//Подключаем библиотеку
    use Telegram\Bot\Api;
    $telegram = new Api('375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s'); //Устанавливаем токен, полученный у BotFather
    $result = $telegram -> getWebhookUpdates(); //Передаем в переменную $result полную информацию о сообщении пользователя
    $text = $result["message"]["text"]; //Текст сообщения
    $chat_id = $result["message"]["chat"]["id"]; //Уникальный идентификатор пользователя
    $name = $result["message"]["from"]["username"]; //Юзернейм пользователя
    $keyboard = [["Последние статьи"],["Картинка"],["Гифка"]]; //Клавиатура
    if($text){
         if ($text == "/start") {
            $reply = "Добро пожаловать в бота!";
            $reply_markup = $telegram->replyKeyboardMarkup([ 'keyboard' => $keyboard, 'resize_keyboard' => true, 'one_time_keyboard' => false ]);
            $telegram->sendMessage([ 'chat_id' => $chat_id, 'text' => $reply, 'reply_markup' => $reply_markup ]);
        }elseif ($text == "/help") {
            $reply = "Информация с помощью.";
            $telegram->sendMessage([ 'chat_id' => $chat_id, 'text' => $reply ]);
        }elseif ($text == "Картинка") {
            $url = "https://68.media.tumblr.com/6d830b4f2c455f9cb6cd4ebe5011d2b8/tumblr_oj49kevkUz1v4bb1no1_500.jpg";
            $telegram->sendPhoto([ 'chat_id' => $chat_id, 'photo' => $url, 'caption' => "Описание." ]);
        }elseif ($text == "Гифка") {
            $url = "https://68.media.tumblr.com/bd08f2aa85a6eb8b7a9f4b07c0807d71/tumblr_ofrc94sG1e1sjmm5ao1_400.gif";
            $telegram->sendDocument([ 'chat_id' => $chat_id, 'document' => $url, 'caption' => "Описание." ]);
        }elseif ($text == "Последние статьи") {
            $html=simplexml_load_file('http://netology.ru/blog/rss.xml');
            foreach ($html->channel->item as $item) {
	     $reply .= "\xE2\x9E\xA1 ".$item->title." (<a href='".$item->link."'>читать</a>)\n";
        	}
            $telegram->sendMessage([ 'chat_id' => $chat_id, 'parse_mode' => 'HTML', 'disable_web_page_preview' => true, 'text' => $reply ]);
        }else{
        	$reply = "По запросу \"<b>".$text."</b>\" ничего не найдено.";
        	$telegram->sendMessage([ 'chat_id' => $chat_id, 'parse_mode'=> 'HTML', 'text' => $reply ]);
        }
    }else{
    	$telegram->sendMessage([ 'chat_id' => $chat_id, 'text' => "Отправьте текстовое сообщение." ]);
    }
";i:1;N;i:2;N;}i:2;i:5374;}i:79;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:8147;}i:80;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:44:"Разберем всё по порядку.";i:1;i:2;i:2;i:8147;}i:2;i:8147;}i:81;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:8147;}i:82;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:8207;}i:83;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:178:"1. Сначала мы подключаем скачанную библиотеку, указав путь (лучше полный) до файла автозагрузчика.";i:1;i:3;i:2;i:8207;}i:2;i:8207;}i:84;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:8207;}i:85;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:99:"
include('vendor/autoload.php'); //Подключаем библиотеку
use Telegram\Bot\Api;
";i:1;N;i:2;N;}i:2;i:8403;}i:86;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:8512;}i:87;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:134:"2. Создаем экземпляр класса в переменной $telegram и передаем в него наш токен.";i:1;i:3;i:2;i:8512;}i:2;i:8512;}i:88;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:8512;}i:89;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:8512;}i:90;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:139:"В переменной $result получаем информацию о сообщении, которое пришлет нам Telegram.";}i:2;i:8660;}i:91;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:8799;}i:92;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:322:"
$telegram = new Api('375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s'); //Устанавливаем токен, полученный у BotFather
$result = $telegram -> getWebhookUpdates(); //Передаем в переменную $result полную информацию о сообщении пользователя
";i:1;N;i:2;N;}i:2;i:8806;}i:93;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:9138;}i:94;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:366:"3. Затем определяем главные переменные: текстовое сообщение, уникальный идентификатор пользователя и его юзернейм. Если предстоит работа с БД, то не забывайте про фильтрацию (или лучше используйте PDO).";i:1;i:3;i:2;i:9138;}i:2;i:9138;}i:95;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:9138;}i:96;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:281:"
$text = $result["message"]["text"]; //Текст сообщения
$chat_id = $result["message"]["chat"]["id"]; //Уникальный идентификатор пользователя
$name = $result["message"]["from"]["username"]; //Юзернейм пользователя
";i:1;N;i:2;N;}i:2;i:9522;}i:97;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:9814;}i:98;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:95:"4. Создаем нашу клавиатуру, состоящую из трех кнопок.";i:1;i:3;i:2;i:9814;}i:2;i:9814;}i:99;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:9814;}i:100;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:111:"
$keyboard = [["Последние статьи"],["Картинка"],["Гифка"]]; //Клавиатура
";i:1;N;i:2;N;}i:2;i:9928;}i:101;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:10050;}i:102;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:469:"5. Теперь, когда мы обозначили все переменные, можно перейти к обработке полученного сообщения. Для этого можно использовать конструкцию switch-case либо if-else. Так как принципиальной разницы между ними нет, остановимся на втором варианте, как наиболее привычном.";i:1;i:3;i:2;i:10050;}i:2;i:10050;}i:103;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:10050;}i:104;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:10050;}i:105;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:186:"В самом начале проверяем, заполнена ли переменная $text и является ли сообщение пользователя текстовым.";}i:2;i:10532;}i:106;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:10718;}i:107;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:197:"
if($text){
         …
         //код
         ...
}else{
         $telegram->sendMessage([ 'chat_id' => $chat_id, 'text' => "Отправьте текстовое сообщение." ]);
}

";i:1;N;i:2;N;}i:2;i:10725;}i:108;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:10725;}i:109;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:201:"Если нет, то отправляем пользователю с помощью метода sendMessage сообщение с просьбой ввести текстовое сообщение.";}i:2;i:10932;}i:110;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:11133;}i:111;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:11135;}i:112;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:151:"6. Рассмотрим вариант, когда пользователь прислал сообщение с командами /start или /help";i:1;i:3;i:2;i:11135;}i:2;i:11135;}i:113;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:11135;}i:114;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:713:"
if ($text == "/start") {
            $reply = "Добро пожаловать в бота!";
            $reply_markup = $telegram->replyKeyboardMarkup([ 'keyboard' => $keyboard, 'resize_keyboard' => true, 'one_time_keyboard' => false ]);
            $telegram->sendMessage([ 'chat_id' => $chat_id, 'text' => $reply, 'reply_markup' => $reply_markup ]);
 }elseif ($text == "/help") {
            $reply = "Информация с помощью.";
            $reply_markup = $telegram->replyKeyboardMarkup([ 'keyboard' => $keyboard, 'resize_keyboard' => true, 'one_time_keyboard' => false ]);
            $telegram->sendMessage([ 'chat_id' => $chat_id, 'text' => $reply, 'reply_markup' => $reply_markup ]);
  }
";i:1;N;i:2;N;}i:2;i:11305;}i:115;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:11305;}i:116;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:266:"В этом случае помимо текста из переменной $reply будет подгружаться клавиатура, состоящая из трёх кнопок: «Последние статьи», «Картинка» и «Гифка». ";}i:2;i:12028;}i:117;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:12294;}i:118;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:12294;}i:119;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:139:"Реализуется это с помощью метода replyKeyboardMarkup, параметрами которого являются:";}i:2;i:12296;}i:120;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:12435;}i:121;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:298:"
'keyboard' => $keyboard, передаем нашу клавиатуру
'resize_keyboard' => true, клавиатура будет сжата в размерах.
'one_time_keyboard' => false, клавиатура не исчезнет после нажатия на какую-то кнопку.
";i:1;N;i:2;N;}i:2;i:12442;}i:122;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:12750;}i:123;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:279:"7. После появления клавиатуры пользователь явно захочет попробовать потыкать на расположенные на ней кнопки, и вот что у нас «под капотом» в этом случае:";i:1;i:3;i:2;i:12750;}i:2;i:12750;}i:124;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:12750;}i:125;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:1001:"
}elseif ($text == "Картинка") {
            $url = "https://68.media.tumblr.com/6d830b4f2c455f9cb6cd4ebe5011d2b8/tumblr_oj49kevkUz1v4bb1no1_500.jpg";
            $telegram->sendPhoto([ 'chat_id' => $chat_id, 'photo' => $url, 'caption' => "Описание." ]);
        }elseif ($text == "Гифка") {
            $url = "https://68.media.tumblr.com/bd08f2aa85a6eb8b7a9f4b07c0807d71/tumblr_ofrc94sG1e1sjmm5ao1_400.gif";
            $telegram->sendDocument([ 'chat_id' => $chat_id, 'document' => $url, 'caption' => "Описание." ]);
        }elseif ($text == "Последние статьи") {
            $html=simplexml_load_file('http://netology.ru/blog/rss.xml');
            foreach ($html->channel->item as $item) {
	     $reply .= "\xE2\x9E\xA1 ".$item->title." (<a href='".$item->link."'>читать</a>)\n";
            }
            $telegram->sendMessage([ 'chat_id' => $chat_id, 'parse_mode' => 'HTML', 'disable_web_page_preview' => true, 'text' => $reply ]);
        }
";i:1;N;i:2;N;}i:2;i:13047;}i:126;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:14057;}i:127;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:498:"8. Для отправки картинки используется метод sendPhoto, для отправки гифки – sendDocument. В обоих случаях Telegram позволяет передавать прямую ссылку на файл, что безусловно очень удобно, но не так быстро, как если бы мы передавали file_id уже отправленной на сервера Telegram картинки или гифки.";i:1;i:3;i:2;i:14057;}i:2;i:14057;}i:128;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:14057;}i:129;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:14568;}i:130;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:233:"9. Для получения последних статей используется простой парсинг RSS ленты Нетологии при помощи встроенной в PHP функции simplexml_load_file.";i:1;i:3;i:2;i:14568;}i:2;i:14568;}i:131;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:14568;}i:132;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:14568;}i:133;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:112:"В параметрах метода sendMessage можно заметить два новых значения:";}i:2;i:14814;}i:134;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:14926;}i:135;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:14926;}i:136;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:16:"1) 'parse_mode' ";}i:2;i:14928;}i:137;a:3:{i:0;s:6:"entity";i:1;a:1:{i:0;s:2:"=>";}i:2;i:14944;}i:138;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:2:" '";}i:2;i:14946;}i:139;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:4:"HTML";}i:2;i:14948;}i:140;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:73:"', чтобы в сообщение можно было вставить ";}i:2;i:14952;}i:141;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:4:"HTML";}i:2;i:15025;}i:142;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:44:"-теги
<b>, <a>, <i>, <code>
или
<pre>";}i:2;i:15029;}i:143;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:15073;}i:144;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:15073;}i:145;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:30:"2)
'disable_web_page_preview' ";}i:2;i:15075;}i:146;a:3:{i:0;s:6:"entity";i:1;a:1:{i:0;s:2:"=>";}i:2;i:15105;}i:147;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:102:" true
чтобы к сообщению со ссылкой не подгружалось превью.";}i:2;i:15107;}i:148;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:15209;}i:149;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:15211;}i:150;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:242:"10. В качестве смайла (стрелка вправо) используются символы \xE2\x9E\xA1. Список всех смайлов в таком виде можно найти на специальном сайте.";i:1;i:3;i:2;i:15211;}i:2;i:15211;}i:151;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:15211;}i:152;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:15468;}i:153;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:230:"11. После того, как вы протестируете бота и будете уверены в его работоспособности, можно отправлять его на всеобщее обозрение.";i:1;i:3;i:2;i:15468;}i:2;i:15468;}i:154;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:15468;}i:155;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:15468;}i:156;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:36:"Благодаря удобному ";}i:2;i:15712;}i:157;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"API";}i:2;i:15748;}i:158;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:294:", боты Telegram могут стать хорошей платформой для автоматизации рутинных действий, настройки уведомлений, удобному и быстрому получению информации и созданию игр.";}i:2;i:15751;}i:159;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:16045;}i:160;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:16045;}i:161;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:177:"Бесплатными площадками для продвижения могут послужить каталоги ботов Telegram Bot Store, TeleChappy или 50bots.";}i:2;i:16047;}i:162;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:16224;}i:163;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:16224;}i:164;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:220:"А анализировать активность пользователей можно с помощью бесплатного инструмента для аналитики ботов от Яндекса — Botan.";}i:2;i:16226;}i:165;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:16446;}i:166;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:16446;}i:167;a:3:{i:0;s:12:"externallink";i:1;a:2:{i:0;s:51:"https://habr.com/ru/company/netologyru/blog/326174/";i:1;s:30:"ссылка на статью";}i:2;i:16449;}i:168;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:16535;}i:169;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:16537;}i:170;a:3:{i:0;s:12:"document_end";i:1;a:0:{}i:2;i:16537;}}